//======================Часть вторая, доработка==========================
1. Сделать так, чтобы райцентры были первыми в соотв списках.
start 11 01
  Первым делом необходимо добавить связь region_id =>city_id возможно это есть на уровне базы данных.\
  
 pause on 11 22
 
 continue 23 12 
 Зачем мне parent_id когда есть region_id?
 И выбор города в регионе сразу обеспечен...
 А затем, что в cities просто нету этих "мегаполисов"
 23 35 - понял, что по крайней мере это будет работать (проверил на москве)
 23 39 - проверил более тщательно.
 
 ALTER TABLE `regions`  ADD COLUMN parent_id INTEGER DEFAULT 0 COMMENT 'для крупных городов - номер региона';
  UPDATE `regions` SET parent_id = 43 WHERE id = 1;
  UPDATE `regions` SET parent_id = 39 WHERE id = 2;
  UPDATE `regions` SET parent_id = 25 WHERE id = 3;
  UPDATE `regions` SET parent_id = 56 WHERE id = 4;
  UPDATE `regions` SET parent_id = 60 WHERE id = 5;
  UPDATE `regions` SET parent_id = 36 WHERE id = 6;
  UPDATE `regions` SET parent_id = 45 WHERE id = 7;
  UPDATE `regions` SET parent_id = 50 WHERE id = 8;
  UPDATE `regions` SET parent_id = 54 WHERE id = 9;
  UPDATE `regions` SET parent_id = 65 WHERE id = 10;
  UPDATE `regions` SET parent_id = 76 WHERE id = 17;
  UPDATE `regions` SET parent_id = 153 WHERE id = 128;
  UPDATE `regions` SET parent_id = 154 WHERE id = 129;
  UPDATE `regions` SET parent_id = 143 WHERE id = 130;
  UPDATE `regions` SET parent_id = 155 WHERE id = 131;
  UPDATE `regions` SET parent_id = 148 WHERE id = 132;
  UPDATE `regions` SET parent_id = 150 WHERE id = 133;
  UPDATE `regions` SET parent_id = 151 WHERE id = 134;
  UPDATE `regions` SET parent_id = 164 WHERE id = 136;
  UPDATE `regions` SET parent_id = 159 WHERE id = 137;
  UPDATE `regions` SET parent_id = 161 WHERE id = 138;
  UPDATE `regions` SET parent_id = 76 WHERE id = 208;
  
  23 49 - закончил сбор данных 
  23 51 - стартую новый этап - вывод этих данных в выпадашках
  00 06 вывод в выпадашках сделал, два вопроса 
  - поймать это при фильтрации и сделать _302 на регион и подумать вообще, как с этим быть при подаче объявлений 
  00 07 начинаю выключать комп
  
  День второй начинаю делать класс, у которого будет два метода - для редиректа с проблемных урлов на нормальные 
  и для переустановке суперглобальных $_POST если надо
  
  //Если в $bind[ $_POST['city'] ] == $_POST['region'] тогда делай...
  $bind = array(1 => 43, 2 => 39, 3 => 25, 4 => 56, 5 => 60, 6 => 36,
  7 => 45, 8 => 50, 9 => 54, 10 => 65, 17 => 76, 128 => 153,
  129 => 154, 130 => 143, 131 => 155, 132 => 148,
  133 => 150, 134 => 151, 136 => 164, 137 => 159,
  138 => 161, 208 => 76);
  
  21 33 
  21 50 продолжаю делать, заметил баг с казахстаном и пр при инициализации списков
  22 55 закончил с первым и вторым пунктом.
2. Сделать так, чтобы при поиске по субъекту райцентры были включены в поиск

3. Сделать рядом со списками кнопку Быстрый поиск, открывается  поп-ап на всю страницу
   на ней алфавит, при клике на букве - регионы с этой буквой, при клике на букву - города.
   Для десктопа - аякс, для телефонов - статика
   
  28 07 2014 - сегодня около 1,5 часов поработал
   styles/main.css
   tpl/regions/tpl
   /controls/regions.php
   /router.php
   
должен закончить в 22 25
   Продолжаю шаблон и внешний вид регионов
   22 27 заканчиваю, следующая страница городов из соотв регионов
   
//======================Часть первая, создание==========================
 Вчера ушло около четырех часов, сегодня около двух, продолжаю.
 Делаю класс FV таким, чтобы можно было указывать объектс модели
 16 18 - закончил но не проверил этот момент. Начинаю прикручивать аякс к форме выбора города.
 16 19 - пошел за таблицами
 16 21 отвлекся на мечты о смартфоне
 16 25 вернулся к своим баранам
 16 28 придеься писать конвнртер из вин в утф для этих nаблиц =((
 17 35 Перегнал, заменил обл на область, сохранил вариант с утф на ггул
 17 35 Начинаю Таки делать аякс. По пути наименьшего сопротивления качаю мутулс
 17 48 скачал, таки начинаю делать аякс
 17 50 Вспомнил что не искал аплоадер для мт
 18 00 Что то скачал с офсайта, надеюсь будет работать 
 19 26 Продолжаю делать аякс для городов. 
	При загрузке страницы скрипт должен пытаться подгрузить список стран, включая текущую
	19 29 Как там с готово у мутулс?
    19 50 check function for POST
 21 15 Доделал, без дисабла пустых списоков, вохможно так и оставлю
 
 Итого [8,5]
 
09 07 Make table of adverts
     На забыть добавить вывод цены в листе
     
12 18 Форма почти готова, осталось только каптча и аплоад и надпись, что без скрипта не рабоатет
12 19 Начинаю каптчу
12 54 Каптча вроде готова перехожу к аплоаду
13 01 подключил ява скрипты ушел обедать не проверяя
13 35 продолжаю аплоад. не забыть вынести авторизацию в отдельную таблицу
17 13 Сменил плагин и допили аплоад жо раьботы в ие7
17 13 Вспомнить, что там с авторизацией за история.
Итак, если пароль не пуст, выдергиваем номер и пароль из базы.
Если строка есть, но пароль не тот и не пуст пишем
"Для этого номера телефона задан пароль отличный от того, что вы ввели.
 Пароль отправлен на адрес электронной почты ***
 Если есть проблема с доступом к электронной почте, придумайте пароль и отправьте его в смс на номер (мой) с номера, 
 который используете для входа на сайт.
 (это обычное СМС, его стоимость будет зависить только от вашего тарифного плана ) 
"
Если строка есть но пароль пуст, обновить пароль
Если строки нет, вставить.

Поэтому, переносим pwd, rawpass, email из main в users

18 50 Перенесли, однако ни хрена что-то не работает как надо.
Обрати внимание на подачу объявлений пользователем с одного и того же телефона с разными мылами и паролями.
Отправку писем тоже надо будет не забыть проверить

Итого [16,5]

09 29 Итак, еще раз...
Если строка есть, но пароль не тот и не пуст пишем
"Для этого номера телефона уже задан пароль отличный от того, что вы ввели.
Если вы хотите поднять, отредактировать, скрыть или удалить какое-то из раннее поданых объявлений, но не помните 
пароль, пройдите на страницу восстановления пароля.
"
Если строка есть но пароль пуст, обновить пароль
Если строки нет, вставить.

Что касается тех, кого я сам зарегил:

Тупо позволяем им ввести пароль 


10 20 Что случилось с сохранением локации?
10 30 Хранилище типа починил... 
Делаю форму без каптчи, позже ее сделать только для авторизованых
11 31 Сделал, добавил десяток по ставрополю. Сделать очистку полей формы при успешном подании, отменить редирект при подаче из админки
11 41 levfk
11 44 Надо добавить замену +код на код + 1 и добавить форму входа.
11 57 c кодом готово, добавляю форму входа, вспомнил что кнопка отправки не дизаблится
16 20 форма входа для десктопа готова в телефонах не смотрел пока, наверное буду потом смотреть
      Делаю кабинет
      
19 00 выход

[24,5]

09 31 Меняю верстку объявления в списке, так, чтобы можно было добавить контролы авторизованого пользователя
09 55 Сверствл, перехожу к редактированию. Первым делом  -права.
11 42 Закончил вроде с редактированием, дизейбл кнопки при отправке формы
11 47 disable при отправке формы есть. 
11 48 -  11 57 добавил стоимость в лист
11 58 убрал вывод цены если ее нет 
11 59 Начинаю разбираться с показом кнопок меню
12 33 Закончил и добавил добавление объявления авторизованым чувачком

13 03 Начал форму поднятия объявлени... Попробую таки попап по центру, главное чтобы мобила стерпела. Ушел на почту и обедать

(В тот день больше не вернулся)
[28.5]

Новый день

12 29 начинаю продолжать 

17 18 делаю, перехожу к выводу пейджинга на главной.
прямо сейчас Отвлекаюсь на Tails.

[33.5]

Завтра:

Фильтр, форма восстановления, админка, телефон

09 17
Начинаю избавляться от country в request


11 02 Filter done 

, форма восстановления

На форме восстановления:

Если такого телефона нет в users, пишем сообщение

"В базе не найден пользователь с таким номером телефона. 
Вы можете подать объявление указав этот номер телефона и пароль, и использовать их для доступа к своему объявлению.
При подаче объявления рекомендуем указать существующий адрес электронной почты, так как без него восстановление пароля будет невозмжно
"

Если телефон в пользователях есть, пишем.

Если указан адрес
Пароль отправлен на адрес электронной почты ***

Если не указан, и sms != 1

 Если это ваш номер телефона, но вы не можете войти в почту или не указывали ее, 
  придумайте пароль и отправьте его в смс на номер (мой) с номера, который используете для входа на сайт.
 (это обычное СМС, его стоимость будет зависить только от вашего тарифного плана ) 
  Пароль будет вам отправлен в ответном смс.
  
  После получения пароля очень рекомендуем указать в настройках существующий адрес электронной почты, 
  так как возможность восстановления пароля по смс разовая.

Если не указан, и sms = 1

  К сожалению, вы не указали адрес электронной почты при подаче объявления. Восстановление пароля невозможно.
  Вы можете подать объявление указав другой телефонный номер. 
  При подаче объявления рекомендуем указать существующий адрес электронной почты, так как без него восстановление пароля будет невозмжно

11 48 Итак, продумал вроде бы все, приступаю

12 56 - восстановление - будем считать что есть.

Нет статуса модера в лк
13 03 готово

Далее, форма настроек мыла и пароля и админка

Ушел обедать по сле чтения новости

14 30 форма настроек мыла

15 39 закончмл, меню

15 53 done start admin panel

16 06 - real start admin [panel (no dbfr, если интьересно, пором проверишь сам , сколько займет)

Делаю авторскую страничку

18 34 - с админкой в первом приближении все, остался аякс на главной
Ужин
20 30 - 22 36 - сделал аяксовый педжинг
Страница объявления после перезагрузки компа
22 39 - курю, наверное на сегодня все

22 52 продолжаю со включенным скайпом, делаю страницу объявления

00 31 Телефон

00 41 - отправляю запрос, надо вернуть красиво ответ

[~44.5]

Новый день
09 13 Попробую сверстать для телефона красиво.
10 03 - телефон есть (красиво - некрасиво... тьфу на вас еще раз)
10 04 Тайтлы, в зависмости от страны
12 00 будем считать что сделал
12 06 - отвлекаюсь на новости

[47.5]

16 47 - новостюшки... перехожу к очистке формы.
16 55 очистка есть
17 09 - константы есть
17 14  Юзер не может установить пустой пароль! (/setting)
17 29 Сделать что бы запоминался выбор Всех регионов и так и написать
17 29 (! не опечатка!)Не забыть выкинуть dnfr_client как сущность
17 30 Elfkbnm nhbuuths b lj,bnmcz hf,jns ,tp yb[
20 10 Регионы и крым
Rjczrb^

404 

20 35 Начинаю добавлять объявления по Махачкале

21 16 ПРиоритеты - грузовая, термробудка, пассажирская
Начинаю делять динамику при выборе типа

21 24 done
Наинаю думать про выгрузку. Видимо, все таки редзона

21 28 - стоп выгрузка, нужна статистика, кто куда ходил и ничего не нашел
21 44 Static done
21 47 Уговорил себя написать страничку статистики в алмике
22 10 done
Отправляюсь читать


1. ПРоверить еще раз нассчет приватности
2. Арендовать хост на редзоне, отключить рекламу, включить дополнительные домены
3. файлы выгрузить на ssh, там распаковать и перекинуть
4. Загрузить базу
5. Добавить в яндекс и гугл
~01 00  - exit

[55.5]


Новый день

1 Почта
2 Тайтлы
3 Понты

11 38 ПОчта

12 10 - начинаю тайтлы.

12 27 тайтлы для страниц регионов сделал
Не плохо бы добавить еще ... забыл что )
12 28 - а, выводить надпись, показаны объявления по
12 29 - не надо, там большими буквами написано
 Начинаю плавную прокрутку при подгрузке.
 При клике запоминаем текущее значение прокрутки C *
 
 При данных устанавливаем таймер, запомнив приращение Д
 
 При таймере, если текущее значене прокрутки меньше С ставим прокрутку в С * 
   Если определено Б и новое текущее == Б останавливаем таймер, выходим
   С = С + Д / 4 (например)
   Запоминаем новое текущее Б
  
   




13 37 - остался только манифест  и прелоадер при загрузке фото

15 14 - ВСЕ - осталось только наполнить )

15 15  - не не все осталось добавить счетчик символво

15 23 - вот теперь - ВСЕ!!!

15 51 - загнался немного с кэшем, но теперь кажется и впрямь все

[58.5]
